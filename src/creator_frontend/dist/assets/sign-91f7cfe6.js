import{u as w,r as o,j as e,B as v,R as S,a as y,C as g,N as E}from"./index-43d0fa9b.js";import{F as _,c as C,a as l}from"./index.esm-4e84dfba.js";import{c as P}from"./index-d5840571.js";import{A as I}from"./index-3d4166f6.js";import{A as q}from"./Alert-294d6ed2.js";import{R as A,C as R}from"./Row-fefb1cc1.js";import"./CloseButton-102e4345.js";const T=()=>{const j=w(),[d,u]=o.useState(""),[p,x]=o.useState(!1),[m,N]=o.useState(null);o.useEffect(()=>{I.create().then(s=>{N(s)})},[]);const f=async(s,{setSubmitting:r})=>{u(""),x(!0);try{const{name:a,username:c,password:i,phone_number:n}=s;if(!m)return;const t=void 0;await new Promise(b=>{m.login({identityProvider:t,onSuccess:()=>b(void 0)})});const h=m.getIdentity().getPrincipal();console.log("Principal:",h.toString()),await P.addClientWithPrincipal(Number(Date.now().toString()),a,c,i,n,h),alert("Signup successful!"),j("/login")}catch(a){console.error("Signup error:",a),u("An error occurred during signup. Please try again later.")}finally{r(!1),x(!1)}};return e.jsx(_,{initialValues:{name:"",username:"",password:"",phone_number:""},validationSchema:C().shape({name:l().required("Name is required"),username:l().required("Username is required"),password:l().required("Password is required"),phone_number:l().required("Phone number is required")}),onSubmit:f,children:({errors:s,handleBlur:r,handleChange:a,handleSubmit:c,isSubmitting:i,touched:n,values:t})=>e.jsxs("form",{noValidate:!0,onSubmit:c,children:[d&&e.jsx(q,{variant:"danger",children:d}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("input",{className:"form-control",name:"name",onBlur:r,onChange:a,value:t.name,placeholder:"Enter Name"}),n.name&&s.name&&e.jsx("small",{className:"text-danger form-text",children:s.name})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("input",{className:"form-control",name:"username",onBlur:r,onChange:a,value:t.username,placeholder:"Enter Username"}),n.username&&s.username&&e.jsx("small",{className:"text-danger form-text",children:s.username})]}),e.jsxs("div",{className:"form-group mb-4",children:[e.jsx("input",{className:"form-control",name:"password",onBlur:r,onChange:a,type:"password",value:t.password,placeholder:"Enter Password"}),n.password&&s.password&&e.jsx("small",{className:"text-danger form-text",children:s.password})]}),e.jsxs("div",{className:"form-group mb-4",children:[e.jsx("input",{className:"form-control",name:"phone_number",onBlur:r,onChange:a,value:t.phone_number,placeholder:"Enter Phone Number"}),n.phone_number&&s.phone_number&&e.jsx("small",{className:"text-danger form-text",children:s.phone_number})]}),e.jsx(A,{children:e.jsx(R,{children:e.jsx(v,{className:"btn-block mb-4",variant:"primary",disabled:i||p,type:"submit",children:i||p?"Signing up...":"Sign Up"})})})]})})},V=()=>e.jsxs(S.Fragment,{children:[e.jsx(y,{}),e.jsx("div",{className:"auth-wrapper",children:e.jsxs("div",{className:"auth-content",children:[e.jsxs("div",{className:"auth-bg",children:[e.jsx("span",{className:"r"}),e.jsx("span",{className:"r s"}),e.jsx("span",{className:"r s"}),e.jsx("span",{className:"r"})]}),e.jsx(g,{className:"borderless text-center",children:e.jsxs(g.Body,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{children:"creator"}),e.jsx("i",{className:"feather icon-unlock auth-icon"})]}),e.jsx(T,{}),e.jsxs("p",{className:"mb-0 text-muted",children:["Already with account?"," ",e.jsx(E,{to:"/login",className:"f-w-400",children:"Sign In"})]})]})})]})})]});export{V as default};

import{r as l,u as F,j as e,B as h,C as o}from"./index-43d0fa9b.js";import{c as q,a as p,b,F as I}from"./index.esm-4e84dfba.js";import{c as g}from"./index-d5840571.js";import{R as S,C as L}from"./Row-fefb1cc1.js";import{A}from"./Alert-294d6ed2.js";import{F as i}from"./Form-ec4a912c.js";import"./CloseButton-102e4345.js";const U=()=>{const[x,j]=l.useState(""),[u,m]=l.useState(""),[v,w]=l.useState([]),k=F();l.useEffect(()=>{(async()=>{try{const s=await g.getArtists();w(s)}catch{m("Failed to load artists.")}})()},[]);const y=async(a,{setSubmitting:s})=>{m(""),j("");try{const{title:c,description:t,price:r,artist_id:d,image:n}=a,_=Date.now();await g.addArtwork(Number(_),c,t,Number(r),parseInt(d),new Date().toISOString(),n),j("Artwork successfully added!")}catch(c){m("Failed to add artwork. Please try again. "+c)}finally{s(!1)}},f=q().shape({title:p().required("Title is required"),description:p().required("Description is required"),price:b().required("Price is required").positive("Price must be a positive number"),artist_id:b().required("Artist is required"),image:p().url("Image must be a valid URL").required("Image URL is required")}),C=()=>{k("/admin/view-artworks")};return e.jsx(S,{children:e.jsxs(L,{sm:12,children:[e.jsx(h,{variant:"primary",onClick:C,className:"mb-3",children:"View Artworks"}),e.jsxs(o,{children:[e.jsx(o.Header,{children:e.jsx(o.Title,{as:"h5",children:"Add Artwork"})}),e.jsxs(o.Body,{children:[x&&e.jsx(A,{variant:"success",children:x}),u&&e.jsx(A,{variant:"danger",children:u}),e.jsx(I,{initialValues:{title:"",description:"",price:"",artist_id:"",image:""},validationSchema:f,onSubmit:y,children:({values:a,handleChange:s,handleSubmit:c,errors:t,touched:r,isSubmitting:d})=>e.jsxs(i,{onSubmit:c,children:[e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Title"}),e.jsx(i.Control,{type:"text",name:"title",placeholder:"Enter artwork title",value:a.title,onChange:s,isInvalid:!!r.title&&!!t.title}),r.title&&t.title&&e.jsx(i.Control.Feedback,{type:"invalid",children:t.title})]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Description"}),e.jsx(i.Control,{as:"textarea",rows:3,name:"description",placeholder:"Enter artwork description",value:a.description,onChange:s,isInvalid:!!r.description&&!!t.description}),r.description&&t.description&&e.jsx(i.Control.Feedback,{type:"invalid",children:t.description})]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Price (Amount)"}),e.jsx(i.Control,{type:"number",name:"price",placeholder:"Enter artwork price",value:a.price,onChange:s,isInvalid:!!r.price&&!!t.price}),r.price&&t.price&&e.jsx(i.Control.Feedback,{type:"invalid",children:t.price})]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Artist"}),e.jsxs(i.Select,{name:"artist_id",value:a.artist_id,onChange:s,isInvalid:!!r.artist_id&&!!t.artist_id,children:[e.jsx("option",{value:"",children:"Select Artist"}),v.map(n=>e.jsx("option",{value:""+n.artist_id,children:n.artist_id+" - "+n.name},n.artist_id))]}),r.artist_id&&t.artist_id&&e.jsx(i.Control.Feedback,{type:"invalid",children:t.artist_id})]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Artwork Image URL"}),e.jsx(i.Control,{type:"text",name:"image",placeholder:"Enter image URL",value:a.image,onChange:s,isInvalid:!!r.image&&!!t.image}),r.image&&t.image&&e.jsx(i.Control.Feedback,{type:"invalid",children:t.image})]}),e.jsx(h,{variant:"primary",type:"submit",disabled:d,children:d?"Adding...":"Add Artwork"})]})})]})]})]})})};export{U as default};

import{r as a,j as t,C as n}from"./index-43d0fa9b.js";import{c as m}from"./index-d5840571.js";import{S as p}from"./Spinner-c61f8477.js";import{A as f}from"./Alert-294d6ed2.js";import{T as g}from"./Table-ed804b5b.js";import"./CloseButton-102e4345.js";const A=()=>{const[i,x]=a.useState([]),[j,o]=a.useState(!0),[l,c]=a.useState("");return a.useEffect(()=>{(async()=>{try{const r=localStorage.getItem("user"),d=JSON.parse(r);if(!d){c("No logged-in user found. Please log in."),o(!1);return}const u=await m.getPaymentsByClient(Number(d.id)),y=await Promise.all(u.map(async h=>{const s=await m.getArtworkDetails(Number(h.artwork_id));return{...h,artwork_title:s?s.title:"Unknown Artwork",artist_name:s?s.artist_name:"Unknown Artist"}}));x(y)}catch(r){console.error("Failed to fetch payments:",r),c("Could not fetch payments. Please try again later.")}finally{o(!1)}})()},[]),t.jsx("div",{children:j?t.jsx("div",{className:"text-center",children:t.jsx(p,{animation:"border",variant:"primary"})}):l?t.jsx(f,{variant:"danger",className:"text-center",children:l}):t.jsxs(n,{children:[t.jsx(n.Header,{children:t.jsx(n.Title,{as:"h5",children:"My Payments"})}),t.jsx(n.Body,{children:t.jsxs(g,{responsive:!0,hover:!0,striped:!0,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"#"}),t.jsx("th",{children:"Artwork Title"}),t.jsx("th",{children:"Artist Name"}),t.jsx("th",{children:"Amount"}),t.jsx("th",{children:"Date"}),t.jsx("th",{children:"Payment Status"})]})}),t.jsx("tbody",{children:i.length>0?i.map((e,r)=>t.jsxs("tr",{children:[t.jsx("th",{scope:"row",children:r+1}),t.jsx("td",{children:e.artwork_title})," ",t.jsx("td",{children:e.artist_name})," ",t.jsxs("td",{children:[Number(e.amount).toLocaleString()," Frw"]}),t.jsx("td",{children:new Date(e.date).toLocaleDateString()}),t.jsx("td",{children:e.payment_status})]},e.payment_id)):t.jsx("tr",{children:t.jsx("td",{colSpan:"6",className:"text-center",children:"No payments found."})})})]})})]})})};export{A as default};

import{r,c as ce,o as Re,d as Pe,e as ve,f as w,g as de,j as a,h as Me,i as et,k as tt,l as Te,m as be,n as nt,q as _,p as H,s as N,t as st,v as ot,w as rt,x as ke,y as at,u as it,R as lt,C as ae,B as ie}from"./index-43d0fa9b.js";import{c as Ne}from"./index-d5840571.js";import{R as ct,C as Ae}from"./Row-fefb1cc1.js";import{s as Q,C as dt,F as Le,t as ut}from"./CloseButton-102e4345.js";function ft(e){const t=r.useRef(e);return t.current=e,t}function De(e){const t=ft(e);r.useEffect(()=>()=>t.current(),[])}var le;function Oe(e){if((!le&&le!==0||e)&&ce){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),le=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return le}function pe(e){e===void 0&&(e=Re());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function ht(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const Se=Pe("modal-open");class mt{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:s=!1}={}){this.handleContainerOverflow=n,this.isRTL=s,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return ht(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",o=this.getElement();t.style={overflow:o.style.overflow,[s]:o.style[s]},t.scrollBarWidth&&(n[s]=`${parseInt(Q(o,s)||"0",10)+t.scrollBarWidth}px`),o.setAttribute(Se,""),Q(o,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(Se),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const we=mt,Ee=(e,t)=>ce?e==null?(t||Re()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function gt(e,t){const n=ve(),[s,o]=r.useState(()=>Ee(e,n==null?void 0:n.document));if(!s){const i=Ee(e);i&&o(i)}return r.useEffect(()=>{t&&s&&t(s)},[t,s]),r.useEffect(()=>{const i=Ee(e);i!==s&&o(i)},[e,s]),s}function pt({children:e,in:t,onExited:n,mountOnEnter:s,unmountOnExit:o}){const i=r.useRef(null),h=r.useRef(t),u=w(n);r.useEffect(()=>{t?h.current=!0:u(i.current)},[t,u]);const m=de(i,e.ref),f=r.cloneElement(e,{ref:m});return t?f:o||!h.current&&s?null:f}function Et(e){return e.code==="Escape"||e.keyCode===27}function xt(){const e=r.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}const yt=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Rt(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function vt(e){let{onEnter:t,onEntering:n,onEntered:s,onExit:o,onExiting:i,onExited:h,addEndListener:u,children:m}=e,f=Rt(e,yt);const{major:p}=xt(),y=p>=19?m.props.ref:m.ref,c=r.useRef(null),x=de(c,typeof m=="function"?null:y),E=M=>T=>{M&&c.current&&M(c.current,T)},j=r.useCallback(E(t),[t]),C=r.useCallback(E(n),[n]),R=r.useCallback(E(s),[s]),A=r.useCallback(E(o),[o]),S=r.useCallback(E(i),[i]),U=r.useCallback(E(h),[h]),V=r.useCallback(E(u),[u]);return Object.assign({},f,{nodeRef:c},t&&{onEnter:j},n&&{onEntering:C},s&&{onEntered:R},o&&{onExit:A},i&&{onExiting:S},h&&{onExited:U},u&&{addEndListener:V},{children:typeof m=="function"?(M,T)=>m(M,Object.assign({},T,{ref:x})):r.cloneElement(m,{ref:x})})}const wt=["component"];function jt(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}const Ct=r.forwardRef((e,t)=>{let{component:n}=e,s=jt(e,wt);const o=vt(s);return a.jsx(n,Object.assign({ref:t},o))}),Mt=Ct;function Tt({in:e,onTransition:t}){const n=r.useRef(null),s=r.useRef(!0),o=w(t);return Me(()=>{if(!n.current)return;let i=!1;return o({in:e,element:n.current,initial:s.current,isStale:()=>i}),()=>{i=!0}},[e,o]),Me(()=>(s.current=!1,()=>{s.current=!0}),[]),n}function bt({children:e,in:t,onExited:n,onEntered:s,transition:o}){const[i,h]=r.useState(!t);t&&i&&h(!1);const u=Tt({in:!!t,onTransition:f=>{const p=()=>{f.isStale()||(f.in?s==null||s(f.element,f.initial):(h(!0),n==null||n(f.element)))};Promise.resolve(o(f)).then(p,y=>{throw f.in||h(!0),y})}}),m=de(u,e.ref);return i&&!t?null:r.cloneElement(e,{ref:m})}function Be(e,t,n){return e?a.jsx(Mt,Object.assign({},n,{component:e})):t?a.jsx(bt,Object.assign({},n,{transition:t})):a.jsx(pt,Object.assign({},n))}const kt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Nt(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}let xe;function At(e){return xe||(xe=new we({ownerDocument:e==null?void 0:e.document})),xe}function Ot(e){const t=ve(),n=e||At(t),s=r.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>n.add(s.current),remove:()=>n.remove(s.current),isTopModal:()=>n.isTopModal(s.current),setDialogRef:r.useCallback(o=>{s.current.dialog=o},[]),setBackdropRef:r.useCallback(o=>{s.current.backdrop=o},[])})}const $e=r.forwardRef((e,t)=>{let{show:n=!1,role:s="dialog",className:o,style:i,children:h,backdrop:u=!0,keyboard:m=!0,onBackdropClick:f,onEscapeKeyDown:p,transition:y,runTransition:c,backdropTransition:x,runBackdropTransition:E,autoFocus:j=!0,enforceFocus:C=!0,restoreFocus:R=!0,restoreFocusOptions:A,renderDialog:S,renderBackdrop:U=d=>a.jsx("div",Object.assign({},d)),manager:V,container:M,onShow:T,onHide:K=()=>{},onExit:ue,onExited:G,onExiting:Z,onEnter:P,onEntering:ee,onEntered:te}=e,fe=Nt(e,kt);const b=ve(),B=gt(M),g=Ot(V),he=et(),ne=tt(n),[O,F]=r.useState(!n),v=r.useRef(null);r.useImperativeHandle(t,()=>g,[g]),ce&&!ne&&n&&(v.current=pe(b==null?void 0:b.document)),n&&O&&F(!1);const k=w(()=>{if(g.add(),L.current=Te(document,"keydown",ge),X.current=Te(document,"focus",()=>setTimeout(me),!0),T&&T(),j){var d,re;const q=pe((d=(re=g.dialog)==null?void 0:re.ownerDocument)!=null?d:b==null?void 0:b.document);g.dialog&&q&&!be(g.dialog,q)&&(v.current=q,g.dialog.focus())}}),z=w(()=>{if(g.remove(),L.current==null||L.current(),X.current==null||X.current(),R){var d;(d=v.current)==null||d.focus==null||d.focus(A),v.current=null}});r.useEffect(()=>{!n||!B||k()},[n,B,k]),r.useEffect(()=>{O&&z()},[O,z]),De(()=>{z()});const me=w(()=>{if(!C||!he()||!g.isTopModal())return;const d=pe(b==null?void 0:b.document);g.dialog&&d&&!be(g.dialog,d)&&g.dialog.focus()}),se=w(d=>{d.target===d.currentTarget&&(f==null||f(d),u===!0&&K())}),ge=w(d=>{m&&Et(d)&&g.isTopModal()&&(p==null||p(d),d.defaultPrevented||K())}),X=r.useRef(),L=r.useRef(),oe=(...d)=>{F(!0),G==null||G(...d)};if(!B)return null;const D=Object.assign({role:s,ref:g.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},fe,{style:i,className:o,tabIndex:-1});let Y=S?S(D):a.jsx("div",Object.assign({},D,{children:r.cloneElement(h,{role:"document"})}));Y=Be(y,c,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:ue,onExiting:Z,onExited:oe,onEnter:P,onEntering:ee,onEntered:te,children:Y});let $=null;return u&&($=U({ref:g.setBackdropRef,onClick:se}),$=Be(x,E,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:$})),a.jsx(a.Fragment,{children:nt.createPortal(a.jsxs(a.Fragment,{children:[$,Y]}),B)})});$e.displayName="Modal";const St=Object.assign($e,{Manager:we});function Bt(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Ft(e,t){e.classList?e.classList.add(t):Bt(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Fe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Lt(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Fe(e.className,t):e.setAttribute("class",Fe(e.className&&e.className.baseVal||"",t))}const I={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Dt extends we{adjustAndStore(t,n,s){const o=n.style[t];n.dataset[t]=o,Q(n,{[t]:`${parseFloat(Q(n,t))+s}px`})}restore(t,n){const s=n.dataset[t];s!==void 0&&(delete n.dataset[t],Q(n,{[t]:s}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Ft(n,"modal-open"),!t.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";_(n,I.FIXED_CONTENT).forEach(i=>this.adjustAndStore(s,i,t.scrollBarWidth)),_(n,I.STICKY_CONTENT).forEach(i=>this.adjustAndStore(o,i,-t.scrollBarWidth)),_(n,I.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(o,i,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();Lt(n,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";_(n,I.FIXED_CONTENT).forEach(i=>this.restore(s,i)),_(n,I.STICKY_CONTENT).forEach(i=>this.restore(o,i)),_(n,I.NAVBAR_TOGGLER).forEach(i=>this.restore(o,i))}}let ye;function $t(e){return ye||(ye=new Dt(e)),ye}const We=r.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},o)=>(t=H(t,"modal-body"),a.jsx(n,{ref:o,className:N(e,t),...s})));We.displayName="ModalBody";const Wt=We,_t=r.createContext({onHide(){}}),_e=_t,Ie=r.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:s,size:o,fullscreen:i,children:h,scrollable:u,...m},f)=>{e=H(e,"modal");const p=`${e}-dialog`,y=typeof i=="string"?`${e}-fullscreen-${i}`:`${e}-fullscreen`;return a.jsx("div",{...m,ref:f,className:N(p,t,o&&`${e}-${o}`,s&&`${p}-centered`,u&&`${p}-scrollable`,i&&y),children:a.jsx("div",{className:N(`${e}-content`,n),children:h})})});Ie.displayName="ModalDialog";const He=Ie,Ue=r.forwardRef(({className:e,bsPrefix:t,as:n="div",...s},o)=>(t=H(t,"modal-footer"),a.jsx(n,{ref:o,className:N(e,t),...s})));Ue.displayName="ModalFooter";const It=Ue,Ht=r.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:s,children:o,...i},h)=>{const u=r.useContext(_e),m=w(()=>{u==null||u.onHide(),s==null||s()});return a.jsxs("div",{ref:h,...i,children:[o,n&&a.jsx(dt,{"aria-label":e,variant:t,onClick:m})]})}),Ut=Ht,Ve=r.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:s=!1,...o},i)=>(e=H(e,"modal-header"),a.jsx(Ut,{ref:i,...o,className:N(t,e),closeLabel:n,closeButton:s})));Ve.displayName="ModalHeader";const Vt=Ve,Kt=st("h4"),Ke=r.forwardRef(({className:e,bsPrefix:t,as:n=Kt,...s},o)=>(t=H(t,"modal-title"),a.jsx(n,{ref:o,className:N(e,t),...s})));Ke.displayName="ModalTitle";const Gt=Ke;function zt(e){return a.jsx(Le,{...e,timeout:null})}function Xt(e){return a.jsx(Le,{...e,timeout:null})}const Ge=r.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:s,contentClassName:o,children:i,dialogAs:h=He,"data-bs-theme":u,"aria-labelledby":m,"aria-describedby":f,"aria-label":p,show:y=!1,animation:c=!0,backdrop:x=!0,keyboard:E=!0,onEscapeKeyDown:j,onShow:C,onHide:R,container:A,autoFocus:S=!0,enforceFocus:U=!0,restoreFocus:V=!0,restoreFocusOptions:M,onEntered:T,onExit:K,onExiting:ue,onEnter:G,onEntering:Z,onExited:P,backdropClassName:ee,manager:te,...fe},b)=>{const[B,g]=r.useState({}),[he,ne]=r.useState(!1),O=r.useRef(!1),F=r.useRef(!1),v=r.useRef(null),[k,z]=ot(),me=de(b,z),se=w(R),ge=rt();e=H(e,"modal");const X=r.useMemo(()=>({onHide:se}),[se]);function L(){return te||$t({isRTL:ge})}function oe(l){if(!ce)return;const W=L().getScrollbarWidth()>0,Ce=l.scrollHeight>Re(l).documentElement.clientHeight;g({paddingRight:W&&!Ce?Oe():void 0,paddingLeft:!W&&Ce?Oe():void 0})}const D=w(()=>{k&&oe(k.dialog)});De(()=>{ke(window,"resize",D),v.current==null||v.current()});const Y=()=>{O.current=!0},$=l=>{O.current&&k&&l.target===k.dialog&&(F.current=!0),O.current=!1},d=()=>{ne(!0),v.current=ut(k.dialog,()=>{ne(!1)})},re=l=>{l.target===l.currentTarget&&d()},q=l=>{if(x==="static"){re(l);return}if(F.current||l.target!==l.currentTarget){F.current=!1;return}R==null||R()},ze=l=>{E?j==null||j(l):(l.preventDefault(),x==="static"&&d())},Xe=(l,W)=>{l&&oe(l),G==null||G(l,W)},Ye=l=>{v.current==null||v.current(),K==null||K(l)},qe=(l,W)=>{Z==null||Z(l,W),at(window,"resize",D)},Je=l=>{l&&(l.style.display=""),P==null||P(l),ke(window,"resize",D)},Qe=r.useCallback(l=>a.jsx("div",{...l,className:N(`${e}-backdrop`,ee,!c&&"show")}),[c,ee,e]),je={...n,...B};je.display="block";const Ze=l=>a.jsx("div",{role:"dialog",...l,style:je,className:N(t,e,he&&`${e}-static`,!c&&"show"),onClick:x?q:void 0,onMouseUp:$,"data-bs-theme":u,"aria-label":p,"aria-labelledby":m,"aria-describedby":f,children:a.jsx(h,{...fe,onMouseDown:Y,className:s,contentClassName:o,children:i})});return a.jsx(_e.Provider,{value:X,children:a.jsx(St,{show:y,ref:me,backdrop:x,container:A,keyboard:!0,autoFocus:S,enforceFocus:U,restoreFocus:V,restoreFocusOptions:M,onEscapeKeyDown:ze,onShow:C,onHide:R,onEnter:Xe,onEntering:qe,onEntered:T,onExit:Ye,onExiting:ue,onExited:Je,manager:L(),transition:c?zt:void 0,backdropTransition:c?Xt:void 0,renderBackdrop:Qe,renderDialog:Ze})})});Ge.displayName="Modal";const J=Object.assign(Ge,{Body:Wt,Header:Vt,Title:Gt,Footer:It,Dialog:He,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Zt=()=>{const[e,t]=r.useState([]),[n,s]=r.useState([]),[o,i]=r.useState(null),[h,u]=r.useState(!1),m=it();r.useEffect(()=>{(async()=>{try{const x=await Ne.getArtworks(),E=await Ne.getArtists(),j=x.map(C=>{const R=E.find(A=>A.artist_id===C.artist_id);return{...C,artist_name:R?R.name:"Unknown"}});t(j),s(E)}catch(x){console.error("Failed to fetch artworks or artists:",x)}})()},[]);const f=c=>{i(c),u(!0)},p=c=>{m(`/pay/${c}`)},y=()=>{u(!1),i(null)};return a.jsxs(lt.Fragment,{children:[a.jsx(ct,{children:e.length>0?e.map(c=>a.jsx(Ae,{xl:4,lg:6,md:6,sm:12,children:a.jsxs(ae,{children:[a.jsx(ae.Img,{variant:"top",src:c.image_url,alt:c.title,style:{height:"300px",objectFit:"cover"}}),a.jsxs(ae.Body,{children:[a.jsx("h6",{className:"mb-4",children:c.title}),a.jsx("p",{children:c.description}),a.jsxs("p",{children:[a.jsx("strong",{children:"Artist:"})," ",c.artist_name]}),a.jsxs("h5",{className:"f-w-300 m-b-0",children:[parseFloat(c.price).toFixed(2)," RWF"]})]}),a.jsxs(ae.Footer,{children:[a.jsx(ie,{variant:"primary",onClick:()=>f(c),children:"View Artwork"}),a.jsx(ie,{variant:"success",className:"ml-2",onClick:()=>p(c.artwork_id),children:"Buy Now"})]})]})},c.artwork_id)):a.jsx(Ae,{children:a.jsx("p",{className:"text-center",children:"No artworks found"})})}),a.jsxs(J,{show:h,onHide:y,children:[a.jsx(J.Header,{closeButton:!0,children:a.jsx(J.Title,{children:o==null?void 0:o.title})}),a.jsx(J.Body,{children:o&&a.jsxs(a.Fragment,{children:[a.jsx("img",{src:o.image_url,alt:o.title,className:"img-fluid mb-3"}),a.jsx("p",{children:o.description}),a.jsxs("p",{children:[a.jsx("strong",{children:"Artist:"})," ",o.artist_name]}),a.jsxs("h5",{children:[parseFloat(o.price).toFixed(2)," RWF"]})]})}),a.jsxs(J.Footer,{children:[a.jsx(ie,{variant:"secondary",onClick:y,children:"Close"}),a.jsx(ie,{variant:"success",onClick:()=>p(o.artwork_id),children:"Buy Now"})]})]})]})};export{Zt as default};
